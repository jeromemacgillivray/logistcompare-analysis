<% extend 'layout' %>

    <div>

        <form name="userForm">
            <div class="form-group">
                <label class="lbl">Name</label>
                <div class="row">
                    <div class="col-xs-6">
                        <input type="text" class="form-control" id="fname" name="fname" placeholder="First Name" required/>
                    </div>
                    <div class="col-xs-6">
                        <input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name" required/>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="lbl">Email</label>
                <div class="row">
                    <div class="col-xs-6">
                        <input type="text" class="form-control" name="email" id="email" placeholder="Email" required/>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-6">
                        <input type="button" class="form-control" value="Submit" id="submit" />
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
        $("#submit").click(function (event) {
            event.preventDefault();
            const email = $("#email").val().trim();
            const fname = $("#fname").val().trim();
            const Lname = $("#lname").val().trim();
            if (!!email && !!fname && !!Lname) {
                const data = {
                    email_address: email,
                    status: 'subscribed',
                    merge_fields: {
                        FNAME: fname,
                        LNAME: Lname,
                    }
                }

                $.post("/user/subscribe", data)
                    .done(function (res) {
                        alert(res);
                    })
                    .fail(function (err) {
                        alert(err.responseText);
                    })
            }
        })
    </script>
    <script type="text/javascript" src="https://secure.gard4mass.com/js/158185.js"></script>
    <noscript>
        <img alt="" src="https://secure.gard4mass.com/158185.png?trk_user=158185&trk_tit=jsdisabled&trk_ref=jsdisabled&trk_loc=jsdisabled"
            height="0px" width="0px" style="display:none;" />
    </noscript>
    <% end %>